<!doctype html>
<html class="no-js blog" lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development Update: May 2018 | Parsec Labs</title>
  <meta name="description" content="Monthly development update for Pasec Plasma Chain">
  <meta name="keywords" content="parsec, blockchain, gaming, esports, PSC, games, entertainment">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="https://parseclabs.org/img/blog/PARSECRocket.jpg" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@Parsec_Labs" />
  
  <meta name="twitter:title" content="Development Update: May 2018" />
  
  <meta name="twitter:description" content="Monthly development update for Pasec Plasma Chain" />
  
  <meta name="twitter:image" content="https://parseclabs.org/img/blog/PARSECRocket.jpg" />

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="canonical" href="http://leapdao.org/blog/Development-Update-May-2018/" />
  <meta name="theme-color" content="#ffffff">

  <link href="https://fonts.googleapis.com/css?family=Chivo:400,700,900" rel="stylesheet">
  <link rel="stylesheet" href="/main.css">
</head>

<body>
  <menu class="menu">
    <ul>
      <li><a href="/">~</a></li>
      <li><a href="/blog">..</a></li>
    </ul>
  </menu>
  <div class="page">
    <div class="blog-post">
      <article class="content">
        <header class="blog-post-header">
          <h1>Development Update: May 2018</h1>
          <p>
            Jun 15, 2018
            
          </p>
        </header>

        <p><img src="/img/blog/DevelopmentUpdateMay.jpg" alt="DevelopmentUpdate"></p>
<p>Heylo, community! This is the first in a series of monthly posts to update you on our work in the R&amp;D and Dapp Development circles. This specific blog post is devoted to May 2018. Let&#39;s start!</p>
<p><h3>Transaction and Proof Library</h3>
<b><a href="https://github.com/troggy">Kosta</a></b>: First of all we have incepted a <a href="https://github.com/parsec-labs/parsec-lib">client library</a> to work with the PARSEC network. Initially we have implemented primitives like transactions, blocks and periods. The Parsec library is used in all aspects of the implementation, being it contracts, node, CLI or frontend. The library was created in the scope of <a href="https://github.com/parsec-labs/PIPs/wiki/Bounty_007">Bounty_007</a>.</p>
<p><h3>Plasma Node</h3>
<b><a href="https://github.com/sunify">Alex</a></b>: Probably the main achievement of the month is the first version of our <a href="https://github.com/parsec-labs/parsec-node">node</a>, which can check transactions using <a href="https://lotionjs.com/">LotionJS</a>.  The implementation was preceded by an evaluation of different implementation options:</p>
<ul>
<li>Developing everything by ourselves - this would include components like p2p messaging, transaction storage, and more;</li>
<li>Forking the <a href="http://bcoin.io/">bcoin project</a>.  As Plasma exit proofs lend itself to UTXO-model blockchains like Bitcoin, we expected to be able to reuse big parts of the code base and put our Plasma code on top. Later we figured out that this is not the best option;</li>
<li>Our final choice fell on <a href="https://tendermint.com/">Tendermint</a>. We chose it together with the Lotion library, which wraps it.  In this case implementing the Plasma chain became much simpler, as almost everything is ready made. We adopted the selection of technologies provided by the Lotion examples and created a first stage realization including submission of block headers to the Plasma contract, among other things.</li>
</ul>
<p><h3>Proof Of Stake</h3>
<b><a href="https://github.com/johannbarbie">Johann</a></b>: This month we have extended our Plasma contract with PoS magic.  One part of this magic are slot auctions.  Slot auctions allow validators to purchase the rights to validate blocks and submit their results to earn rewards.  Check the screenshot below for the final state machine that defines all transitions in the slot model!</p>
<p><img src="/img/blog/SlotModel.png" alt="SlotModel"></p>
<p>We have also implemented a reflexive block reward function that is based on the percentage of total supply staked. This will ensure a healthy competition between the validators without ever binding all tokens into the staking contract. This way the token economy on chain will stay unaffected by validator staking. We have found a neat little formula that can be implemented in Solidity:</p>
<p><img src="/img/blog/Formula.jpg" alt="Formula"></p>
<p>Where <b>&alpha;</b> is <i>% of total supply staked</i>, <b>&beta;</b> is <i>block reward</i>, and <b>&omega;</b> represents <i>total supply</i>. The function looks like this:</p>
<p><img src="/img/blog/BlockRewardsGraph.png" alt="FoBlockRewards" class="narrow"></p>
<p><h3>EVM Computation Verification</h3>
On top of that we have started to collaborate with <a href="https://matic.network/">matic.network</a> and <a href="https://decentraland.org/">decentraland.org</a> to implement EVM fraud proof verification. These fraud proofs will allow to challenge invalid computation on the Plasma chain through the Plasma contracts.  You can check out a first design document <a href="https://docs.google.com/document/d/1UsC3RbGNQuOla8EPwPDjXnsRKrpJt3IlUQTKnlrjHTg">here</a>.  Stay tuned for bounties and code that will come out of this collaboration.</p>
<p><h3>Gas Oracle</h3>
And finally, <b><a href="https://github.com/Koroqe">Alex Core</a></b> made a gas oracle! Alex proposed two variants of the gas oracle.</p>
<ul>
<li>Store <i>gasPrice</i> amount in block struct.  The function getAverageGasPrice() calculates and returns the average gas price of 20 last blocks.</li>
<li>Store <i>gasPrice</i> in variable and modify it with every block submission. The pseudocode for this approach is as follows: <br><br><i>avgGasPrice = avgGasPrice - avgGasPrice/15 + tx.gasprice/15</i><br></li>
</ul>
<p>In first approach the transaction to query average gas price costs approximately 28864 gas. Every block submission costs 21500 gas more. In the second approach the getter is simply reading the storage, and every block submission costs approximately 6500 gas (21500 at first block). You can find more about it <a href="https://github.com/parsec-labs/parsec-contracts/pull/18">here</a>. This feature was developed in the scope of <a href="https://github.com/parsec-labs/PIPs/wiki/Bounty_015">Bounty_15</a>.</p>
<p>These are all the updates for May 2018!</p>

      </article>
    </div>
    <ul class="links">
      <li>
        <a href="https://docs.google.com/document/d/1vStTjqvqZGyiI5AVtpwCIMlHFnzC_4bbixsCfs27-M8/edit" target="_blank">Read</a>
      </li>
      <li>
        <a href="https://twitter.com/leapdao" target="_blank">Follow</a>
      </li>
      <li>
        <a href="mailto:mail@leapdao.org" target="_blank">Contact</a>
      </li>
      <li>
        <a href="http://join.leapdao.org" target="_blank">Join</a>
      </li>
      <li>
        <a href="https://github.com/parsec-labs" target="_blank">Contribute</a>
      </li>
    </ul>
  </div>

  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="530" height="545" id="amoebe">
    <defs>
      <filter id="goo">
        <feGaussianBlur in="SourceGraphic" stdDeviation="35" result="blur" />
        <feColorMatrix in="blur" mode="matrix" result="mat" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 50 -19" />
      </filter>
    </defs>

    <g filter="url(#goo)">
      <circle cx="0" cy="0" r="30" />
      <circle cx="0" cy="0" r="30" />
      <circle cx="0" cy="0" r="30" />
      <circle cx="0" cy="0" r="30" />
      <circle cx="0" cy="0" r="30" />
    </g>
  </svg>

  <script src="/main.js" async></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-128351135-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-128351135-1');
  </script>
</body>

</html>